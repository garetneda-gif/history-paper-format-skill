<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    
    <!--
      ═══════════════════════════════════════════════════════════════════════════
      脚注每页重置策略说明 (Footnote Per-Page Reset Strategy)
      ═══════════════════════════════════════════════════════════════════════════
      
      当前实现：CSS counter-reset 方案
      
      优点：
      - 无需外部依赖，所有浏览器均支持 CSS counter
      - 轻量级，不增加运行时开销
      - 兼容性极好，支持 IE9+ 及所有现代浏览器
      
      限制：
      - CSS counter 可控制"显示计数器值"（如①②③），但浏览器原生打印时
        脚注无法真正"浮动到页底"并按页自动分割
      - 这需要 Paged Media 引擎支持（CSS Paged Media Level 3 规范）
      
      如需真正的"每页脚注浮动"（适用于严格学术出版）：
      
      可选方案A：Paged.js（开源 polyfill）
        1. 在 </head> 前添加：
           <script src="https://unpkg.com/pagedjs/dist/paged.polyfill.js"></script>
        
        2. 将正文中的脚注引用改写为：
           <p>正文内容<span class="footnote">脚注内容</span></p>
        
        3. 在 CSS 中添加：
           .footnote {
             float: footnote;
             footnote-display: block;
           }
           @page {
             @footnote {
               border-top: 0.5pt solid #000;
               padding-top: 4pt;
               margin-top: 6pt;
             }
           }
        
        详见：https://pagedjs.org/documentation/
      
      可选方案B：Prince XML（商业引擎，高质量 PDF 输出）
        - 支持完整的 CSS Paged Media 规范
        - 适用于出版级排版需求
        - 详见：https://www.princexml.com/
      
      降级行为（当前模板）：
      - 脚注集中在每个 .page div 底部（需手动放置 HTML）
      - 序号通过 CSS counter 显示（每页自动从①开始）
      - 视觉上符合每页编号要求
      - 跨页自动分割需手动调整 HTML 内容分配
      
      footnote reset fallback: 降级模式已激活（见 references/footnote-strategy.md）
      
      ═══════════════════════════════════════════════════════════════════════════
    -->
    
    <style>
        /* =========================================================================
           全局样式变量 (Global Style Variables)
           ========================================================================= */
        :root {
            --paper-width: 210mm;   /* A4 宽度 */
            --paper-height: 297mm;  /* A4 高度 */
            --page-margin-top: 3.3cm;
            --page-margin-bottom: 2.7cm;
            --page-margin-left: 2.4cm;
            --page-margin-right: 2.3cm;
            --column-gap: 6mm;
            --base-font-size: 12pt; /* 小四号，版芯: 36字 × 16cm */
            --base-line-height: 17.9pt;
        }

        /* 字体定义 (Font Definitions) */
        @font-face {
            font-family: 'LatinTNR';
            src: local('Times New Roman'), local('TimesNewRoman');
            unicode-range: U+0020-007E, U+00A0-00FF;
        }

        /* 基础重置 (Base Reset) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f0f0f0; /* 仅供预览时区分页面背景，打印时不可见 */
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 12pt; /* 小四号正文，与 --base-font-size 一致 */
            font-size: var(--base-font-size);
            line-height: var(--base-line-height);
            color: #000;
        }

        /* =========================================================================
           页面容器 (Page Container)
           ========================================================================= */
        @page {
            size: A4;
            margin: var(--page-margin-top) var(--page-margin-right) var(--page-margin-bottom) var(--page-margin-left);
        }

        .page {
            width: var(--paper-width);
            min-height: var(--paper-height);
            margin: 0 auto 10mm auto;
            background-color: white;
            padding: var(--page-margin-top) var(--page-margin-right) var(--page-margin-bottom) var(--page-margin-left);
            position: relative;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            page-break-after: always;
            /* 内部使用 flex 布局方便管理页眉页脚和正文内容区 */
            display: flex;
            flex-direction: column;
            /* 每页重置脚注计数器 */
            counter-reset: footnote;
        }

        @media print {
            body {
                background-color: transparent;
            }
            .page {
                margin: 0;
                padding: 0; /* 打印时由 @page 控制边距 */
                box-shadow: none;
                page-break-after: always;
                width: auto;
                min-height: auto;
            }
        }

        .page-header {
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 10.5pt;
            text-align: center;
            border-bottom: 0.5pt solid #000;
            padding-bottom: 2mm;
            margin-bottom: 5mm;
        }

        .page-content {
            flex-grow: 1;
            position: relative;
        }

        .page-footer {
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 10.5pt;
            text-align: center;
            margin-top: auto;
            padding-top: 5mm;
        }

        /* =========================================================================
           双栏布局 (Two-Column Layout)
           ========================================================================= */
        .two-column {
            column-count: 2;
            column-gap: var(--column-gap);
            text-align: justify;
            /* column-fill: auto;  按需开启 */
        }

        /* 跨栏元素 (Spanning Elements) */
        .full-width {
            column-span: all;
        }

        /* =========================================================================
           排版元素 (Typography Elements)
           ========================================================================= */
        /* 段落 */
        p {
            text-indent: 2em;
            margin-bottom: 0;
            text-align: justify;
        }

        .first-paragraph {
            text-indent: 0;
        }

        /* 标题层次 */
        h1.paper-title {
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 26pt;
            text-align: center;
            font-weight: bold;
            margin-bottom: 8mm;
            column-span: all;
        }

        h2.author-info {
            font-family: 'LatinTNR', "KaiTi", "STKaiti", serif;
            font-size: 12pt;
            text-align: center;
            margin-bottom: 8mm;
            column-span: all;
        }

        h3.section-title {
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 16pt;
            font-weight: bold;
            text-indent: 0;
            margin-top: 1em;
            margin-bottom: 0.5em;
            text-align: center; /* 历史研究格式通常居中 */
        }

        h4.subsection-title {
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 14pt;
            font-weight: bold;
            text-indent: 2em; /* 历史研究格式部分小标题带缩进 */
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        /* 摘要和关键词 */
        .abstract-section {
            margin-bottom: 8mm;
            column-span: all;
        }

        .abstract-block, .keywords-block {
            margin-bottom: 0.5em;
            text-align: justify;
        }

        .abstract-label, .keywords-label {
            font-family: 'LatinTNR', "SimHei", "STHeiti", "Microsoft YaHei", sans-serif;
            font-size: 12pt;
            font-weight: bold;
        }

        .abstract-content, .keywords-content {
            font-family: 'LatinTNR', "FangSong", "STFangsong", serif;
            font-size: 12pt;
            padding-left: 1em;
            padding-right: 1em;
        }

        /* 独立引文 */
        blockquote {
            font-family: 'LatinTNR', "KaiTi", "STKaiti", serif;
            font-size: 12pt;
            padding-left: 2em;
            padding-right: 2em;
            text-indent: 0;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        /* =========================================================================
           表格与图版 (Tables & Figures)
           ========================================================================= */
        .table-wrapper {
            margin: 1em 0;
            width: 100%;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'LatinTNR', "SimSun", "STSong", "Noto Serif CJK SC", serif;
            font-size: 10.5pt;
            text-align: center;
        }

        th, td {
            border: 1px solid #000;
            padding: 2mm;
        }

        .table-caption, .figure-caption {
            font-family: 'LatinTNR', "KaiTi", "STKaiti", serif;
            font-size: 10.5pt;
            text-align: center;
            margin-bottom: 0.5em;
        }

        /* 三线表覆盖样式 */
        table.three-line {
            border-top: 1.5pt solid #000;
            border-bottom: 1.5pt solid #000;
        }
        table.three-line th, table.three-line td {
            border: none;
        }
        table.three-line thead {
            border-bottom: 0.75pt solid #000;
        }

        figure {
            margin: 1em 0;
            text-align: center;
        }
        figure img {
            max-width: 100%;
            height: auto;
        }

        /* =========================================================================
           脚注区域 (Footnotes Area)
           ========================================================================= */
        
        /* 脚注引用上标 - 使用CSS counter自动编号 */
        sup.fn-ref {
            counter-increment: footnote;
            font-size: 0.7em;
            vertical-align: super;
            font-weight: normal;
        }
        sup.fn-ref::before {
            content: counter(footnote);
        }
        
        /* 脚注区域容器 */
        .footnote-area {
            font-family: 'LatinTNR', "KaiTi", "STKaiti", serif;
            font-size: 10.5pt;
            line-height: 14.5pt;
            border-top: 0.5pt solid #000;
            padding-top: 4pt;
            margin-top: 6pt;
        }
        
        /* 脚注条目（使用flex布局实现序号前后1em空位） */
        .footnote-item {
            display: flex;
            gap: 0;
            text-indent: 0;
            margin-bottom: 2pt;
        }
        
        .footnote-num {
            min-width: 1em;      /* 序号前空位：1字符 */
            padding-right: 1em;  /* 序号后空位：1字符 */
            text-align: left;
        }
        
        .footnote-text {
            flex: 1;
            text-align: justify;
        }

    </style>
</head>
<body>

    <!-- =========================================================================
         第1页：封面页 (Cover Page)
         ========================================================================= -->
    <div class="page">
        <div class="page-content">
            
            <h1 class="paper-title">论历史研究的格式规范与排版艺术</h1>
            <h2 class="author-info">张三（历史大学 历史系，北京 100000）</h2>

            <div class="abstract-section">
                <div class="abstract-block">
                    <span class="abstract-label">【摘 要】</span>
                    <span class="abstract-content">本文探讨了历史研究论文的排版规范，详细论述了双栏布局、字体选择、页眉页脚设置以及图表和脚注的排版要求。通过严格的CSS控制，实现了高质量的打印输出和在线阅读体验。</span>
                </div>
                <div class="keywords-block">
                    <span class="keywords-label">【关键词】</span>
                    <span class="keywords-content">历史研究；格式排版；双栏布局；CSS；学术规范</span>
                </div>
            </div>

            <div class="two-column" style="margin-top: 10mm;">
                <h3 class="section-title">一、引言</h3>
                <p class="first-paragraph">历史研究论文的排版质量直接影响着学术成果的传播效果和读者的阅读体验。一份格式规范、排版精良的论文，不仅能体现作者严谨的治学态度，还能提升论文的整体学术品位。在长期的学术实践中，历史学界形成了一套独具特色的排版规范，这些规范涵盖了从整体布局到字体细节的方方面面。</p>
                <p>随着数字化排版技术的发展，如何利用现代工具精准再现传统的学术排版美学，成为了一个值得研究的课题。传统的Word排版虽然普及，但在处理复杂格式和实现自动化排版方面存在局限。基于HTML和CSS的排版技术，为解决这些问题提供了新的思路。</p>
                
                <blockquote>
                    这是一个独立引文的示例。历史研究中常有大量史料引用，独立引文需要特殊的格式处理，通常使用楷体，左右缩进，以区别于正文。
                </blockquote>

                <p>本文旨在详细解析历史研究论文的排版规范，并探讨如何通过前端技术实现高质量的双栏分页排版。我们将从页面布局、字体选择、多栏处理等多个角度展开论述。</p>
            </div>

            <!-- 示例脚注（每页单独编号） -->
            <div class="footnote-area">
                <div class="footnote-item">
                    <span class="footnote-num">①</span>
                    <span class="footnote-text">这是第一页的脚注示例，使用楷体10.5pt字号，行高14.5pt，序号前后各留1字符空位。</span>
                </div>
                <div class="footnote-item">
                    <span class="footnote-num">②</span>
                    <span class="footnote-text">脚注区域位于页面底部，上方有0.5pt粗细的分隔线，顶部留4pt间距。</span>
                </div>
            </div>

        </div>
    </div>

    <!-- =========================================================================
         第2页：正文页 (Text Page)
         ========================================================================= -->
    <div class="page">
        <div class="page-header">张三：论历史研究的格式规范与排版艺术</div>
        <div class="page-content two-column">
            
            <h3 class="section-title">二、页面布局与双栏设定</h3>
            <p class="first-paragraph">页面布局是排版的基础。历史研究论文通常采用A4纸张，页边距设置有严格要求，一般为上3.3cm、下2.7cm、左2.4cm、右2.3cm。这种非对称的边距设置考虑了装订的需要，同时也使版面更加稳重。</p>
            <p>双栏排版是学术期刊的常见形式，它能在有限的版面内容纳更多的文字，同时缩短了阅读时的视线移动距离，有助于提高阅读效率。在双栏排版中，栏间距（column-gap）的设置至关重要，过大则显得松散，过小则容易串行。通常，我们将栏间距设定为6mm左右。</p>
            
            <h4 class="subsection-title">1. 双栏的技术实现</h4>
            <p class="first-paragraph">在HTML/CSS体系中，实现双栏布局主要依靠 <code>column-count: 2</code> 属性。为了保证每页内容的精确控制，我们不能让整个文档处于一个连续的容器中自动分页。相反，必须为每一页创建一个独立的 <code>.page</code> 容器，并在其中应用双栏样式。</p>
            <p>这种方法虽然增加了HTML结构的复杂性，但确保了分页的精确性，避免了内容溢出或页面留白的问题。我们需要精确计算每页能容纳的字数，手动（或通过脚本）进行内容的切分。</p>

            <h3 class="section-title">三、字体与段落规范</h3>
            <p class="first-paragraph">中文字体的选择和搭配是中文排版的精髓。历史研究论文的正文通常使用宋体，字号为五号（10.5pt）或小四（12pt），行高设定为字号的1.5倍左右（如17.9pt）。英文和数字则要求使用Times New Roman字体。为了实现中西文字体的完美混合，我们在CSS中使用了 <code>@font-face</code> 和 <code>unicode-range</code> 技术，将英文字符精确匹配到Times New Roman，而中文字符回落到宋体。</p>
            <p>段落排版的首要规则是首行缩进两字符。需要特别注意的是，在各级标题之后的首段，传统习惯上通常要求顶格排版，不进行首行缩进。这可以通过为首段添加 <code>.first-paragraph</code> 类来实现。</p>

            <div class="table-wrapper full-width">
                <div class="table-caption">表1 常见排版元素样式对比</div>
                <table class="three-line">
                    <thead>
                        <tr>
                            <th>元素名称</th>
                            <th>字体</th>
                            <th>字号</th>
                            <th>行高/间距</th>
                            <th>其他说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>大标题</td>
                            <td>宋体/黑体</td>
                            <td>26pt</td>
                            <td>-</td>
                            <td>居中，跨栏</td>
                        </tr>
                        <tr>
                            <td>一级标题</td>
                            <td>宋体</td>
                            <td>16pt</td>
                            <td>-</td>
                            <td>居中</td>
                        </tr>
                        <tr>
                            <td>正文</td>
                            <td>宋体</td>
                            <td>12pt</td>
                            <td>17.9pt</td>
                            <td>首行缩进2字符</td>
                        </tr>
                        <tr>
                            <td>独立引文</td>
                            <td>楷体</td>
                            <td>12pt</td>
                            <td>17.9pt</td>
                            <td>左右缩进，首行不缩进</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <p>表格排版中，最常见的是"三线表"格式。三线表摒弃了繁杂的网格线，仅保留顶线、底线和表头下线，显得简洁明快、专业严谨。</p>

        </div>
        <div class="page-footer">2</div>
    </div>

</body>
</html>
